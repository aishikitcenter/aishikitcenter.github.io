<!DOCTYPE html>
<html lang="en">
<!-- নতুন জাতীয় পরিচয়পত্র করতে কী কী লাগে? -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AITC: Create NID Template</title>
    <link rel="stylesheet" href="/style.css">
</head>

<body>
    <div class="container">
        <div style="display: flex; margin-bottom: 6rem">
            <div class="col-md-4 mb-4 noprint">
                <form id="pdfForm">
                    <div class="form-group">
                        <label>Date of Birth:</label>
                        <select type="text" id="dd" required>
                            <option value="">Select</option>
                            <option value="01">01</option>                           
                            <option value="02">02</option>
                            <option value="03">03</option>
                            <option value="04">04</option>
                            <option value="05">05</option>
                            <option value="06">06</option>
                            <option value="07">07</option>
                            <option value="08">08</option>
                            <option value="09">09</option>
                            <option value="10">10</option>
                            <option value="11">11</option>
                            <option value="12">12</option>
                            <option value="13">13</option>
                            <option value="14">14</option>
                            <option value="15">15</option>
                            <option value="16">16</option>
                            <option value="17">17</option>
                            <option value="18">18</option>
                            <option value="19">19</option>
                            <option value="20">20</option>
                            <option value="21">21</option>
                            <option value="22">22</option>
                            <option value="23">23</option>
                            <option value="24">24</option>
                            <option value="25">25</option>
                            <option value="26">26</option>
                            <option value="27">27</option>
                            <option value="28">28</option>
                            <option value="29">29</option>
                            <option value="30">30</option>
                            <option value="31">31</option>
                        </select>
                        <select type="text" id="mmm" required>
                            <option value="">Select</option>
                            <option value="Jan">January</option>
                            <option value="Feb">February</option>
                            <option value="Jan">January</option>
                            <option value="Feb">February</option>
                            <option value="Mar">March</option>
                            <option value="Apr">April</option>
                            <option value="May">May</option>
                            <option value="Jun">June</option>
                            <option value="Jul">July</option>
                            <option value="Aug">August</option>
                            <option value="Sep">September</option>
                            <option value="Oct">October</option>
                            <option value="Nov">November</option>
                            <option value="Dec">December</option>
                        </select>
                        <input type="text" id="yyyy" placeholder="DD/MM/YYYY" required>
                    </div>
                    <div class="form-group">
                        <label>NID:</label>
                        <input type="text" id="nid" required>
                    </div>
                    <div class="form-group">
                        <label>আপনার খোমা:</label>
                        <input type="file" id="image" required>
                    </div>
                    <div class="form-group">
                        <label>প্রদানের তারিখ:</label>
                        <input type="text" id="dos" required>
                    </div>
                    <div class="form-group">
                        <label>নাম:</label>
                        <input type="text" id="naam" required>
                    </div>
                    <div class="form-group">
                        <label for="name">Name:</label>
                        <input type="text" id="name" name="name" required>
                    </div>

                    <div class="form-group">
                        <label>পিতার নাম:</label>
                        <input type="text" id="pita" required>
                    </div>
                    <div class="form-group">
                        <label>মাতার নাম:</label>
                        <input type="text" id="mata" required>
                    </div>
                    <div class="form-group">
                        <label>জন্মস্থান:</label>
                        <input type="text" id="pob" value="ময়মনসিংহ" required>
                    </div>
                    <div class="form-group">
                        <label>রক্তের গ্রুপ:</label>
                        <select type="text" id="bg" required>
                            <option value="">Select</option>
                            <option value="A+">A+</option>
                            <option value="A-">A-</option>
                            <option value="B+">B+</option>
                            <option value="B-">B-</option>
                            <option value="Mar">AB+</option>
                            <option value="Apr">AB-</option>
                            <option value="May">O+</option>
                            <option value="Jun">O-</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>স্থায়ী ঠিকানা:</label>
                        <input id="thikana1" placeholder="Line 1" value="গ্রাম/রাস্তা: মাইজবাগ, ডাকঘর: কুল্লাপাড়া - ২২৮০, ঈশ্বরগঞ্জ," required>
                        <input id="thikana2" placeholder="Line 2" value="ময়মনসিংহ" required>
                    </div>
                </form>
            </div>
            <div class="col-md-8 mb-4">
                <div id="svgContainer"></div>
            </div>
        </div>
        <footer class="noprint" style="text-align: center; background: #f8f8f8; padding-top: 1rem">
            <h1 style="margin: 0px;">AISHIK IT CENTER</h1>
            <h6 style="margin-top: 0px;">Laksmiganj Bazar, Ishwargnaj, Mymensingh</h6>
            <button type="button" onclick="fillSVG()">Update</button>
            <button onclick="window.print()">Print</button>
        </footer>
    </div>

    <script>
       document.getElementById('image').addEventListener('change', function(event) {
    const file = event.target.files[0];
    if (file) {
        const reader = new FileReader();
        reader.onload = function(e) {
            const svgImage = document.getElementById('svgImage');
            const svgContainer = document.getElementById('svgContainer');

            // Get current dimensions
            const width = svgContainer.getAttribute('width');
            const height = svgContainer.getAttribute('height');

            // Update the image source
            svgImage.setAttributeNS('http://www.w3.org/1999/xlink', 'href', e.target.result);

            // Preserve the original dimensions
            svgContainer.setAttribute('width', width);
            svgContainer.setAttribute('height', height);
        };
        reader.readAsDataURL(file);
    }
});

async function fillSVG() {
    // Getting the form data
    const naam = document.getElementById('naam').value;
    const name = document.getElementById('name').value.toUpperCase();
    document.title = name;
    const pita = document.getElementById('pita').value;
    const mata = document.getElementById('mata').value;
    const pob = document.getElementById('pob').value;
    const dos = document.getElementById('dos').value;
    const bg = document.getElementById('bg').value;
    const dd = document.getElementById('dd').value;
    const mmm = document.getElementById('mmm').value;
    const yyyy = document.getElementById('yyyy').value;
    const nid = document.getElementById('nid').value;
    const thikana1 = document.getElementById('thikana1').value;
    const thikana2 = document.getElementById('thikana2').value;

    // Fetching the SVG template
    const response = await fetch('template.svg');
    let svgText = await response.text();

    // Replacing placeholders with form data
    svgText = svgText.replace('{{naam}}', naam);
    svgText = svgText.replace('{{name}}', name);
    svgText = svgText.replace('{{pita}}', pita);
    svgText = svgText.replace('{{mata}}', mata);
    svgText = svgText.replace('{{pob}}', pob);
    svgText = svgText.replace('{{dos}}', dos);
    svgText = svgText.replace('{{bg}}', bg);
    svgText = svgText.replace('{{dd}}', dd);
    svgText = svgText.replace('{{mmm}}', mmm);
    svgText = svgText.replace('{{yyyy}}', yyyy);
    svgText = svgText.replace('{{nid}}', nid);
    svgText = svgText.replace('{{thikana1}}', thikana1);
    svgText = svgText.replace('{{thikana2}}', thikana2);

    // Insert the updated SVG into the container
    const svgContainer = document.getElementById('svgContainer');
    svgContainer.innerHTML = svgText;

    // Update the image if uploaded
    const fileInput = document.getElementById('image194');
    const file = fileInput.files[0];
    if (file) {
        const reader = new FileReader();
        reader.onload = function(e) {
            const svgImage = svgContainer.querySelector('image194');

            // Get current dimensions
            const width = svgContainer.getAttribute('width');
            const height = svgContainer.getAttribute('height');

            // Update the image source
            svgImage.setAttributeNS('http://www.w3.org/1999/xlink', 'href', e.target.result);

            // Preserve the original dimensions
            svgContainer.setAttribute('width', width);
            svgContainer.setAttribute('height', height);
        };
        reader.readAsDataURL(file);
    }
}
</script>
</body>

</html>